{% extends 'base.html' %}
{% block head %}
    {{ super() }}
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='style/l_r_u_style.css') }}">
    <script defer src="{{ url_for('static', filename='js/errorMessage.js') }}"></script>
    <script defer src="{{ url_for('static', filename='js/upload.js') }}"></script>
{% endblock %}
{% block main %}
    <main>
        <div class=form_box>
            <h2 class=form_title>Добавить изображение</h2>
            <form action="{{ url_for('upload') }}" method="post" id="uploadForm">
                {% for field in form if (field.name != 'csrf_token') and (field.name != 'submit') and (field.name != 'file') %}
                    <p>{{ field.label() }}</p>
                    {{ field() }}
                    {% for error in field.errors %}
                            <div class="error">{{ error }}</div>
                    {% endfor %}
                {% endfor %}
                {{ form.file(onchange="updatePreview(event)") }}
                <img class="preview" id="preview" src="//:0"/>
                {{ form.submit() }}
            </form>
            <button class="fake_button" id="fakeButton" onclick="writeError()">Загрузить файл</button>
            <div class="error_message" id="errorMessage">
            </div>
        </div>
    </main>
{% endblock %}
